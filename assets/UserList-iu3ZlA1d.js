import{r as h,j as e,I as w,L as E,S as d,T as x,u as I,a as f,M as j,b as g,c as p,d as L,e as M}from"./index-BBztvU3A.js";import{M as P,P as S,A as T,S as m,u as U}from"./useIntersectionObserver-CB92kBy_.js";const k=(s,t)=>{const a=h.useRef(s),r=h.useRef(null);h.useEffect(()=>{a.current=s},[s]);const n=h.useCallback(()=>{r.current&&clearTimeout(r.current)},[]);return[h.useMemo(()=>{const i=(...l)=>{a.current(...l)};return(...l)=>{n(),r.current=setTimeout(()=>i(...l),t)}},[n]),n]},N=({onSearch:s,searchValue:t,placeholder:a})=>{const[r,n]=k(s,700),[c,i]=h.useState(t??""),l=o=>{o?r(o):n(),i(o)};return h.useEffect(()=>{i(c)},[t]),e.jsx(w,{size:"xl",placeholder:a,leftSection:e.jsx(P,{size:30}),value:c,onChange:o=>l(o.target.value),radius:"lg"})},R="_root_w83zw_1",b={root:R},_=({user:s})=>e.jsxs(S,{p:"md",radius:"lg",shadow:"sm",withBorder:!0,className:b.root,component:E,to:`/users/${s.login}`,c:"inherit",td:"none",children:[e.jsx(T,{src:s.avatarUrl,size:"xl"}),e.jsxs(d,{gap:8,children:[e.jsx(x,{fw:"bold",fz:"lg",children:s.login}),e.jsx(x,{mb:12,fz:"md",children:s.name})]}),!!s.id&&e.jsxs(x,{miw:0,mt:"auto",fw:"bold",truncate:!0,ta:"end",children:["ID: ",s.id]})]}),v=(...s)=>{var o,u;const{data:t,fetchMore:a,...r}=I(...s),n=t==null?void 0:t.search.pageInfo.hasNextPage,c=(u=(o=t==null?void 0:t.search)==null?void 0:o.pageInfo)==null?void 0:u.endCursor,i=t==null?void 0:t.search.nodes,l=h.useCallback(()=>a({variables:{after:c}}),[a,c]);return{...r,fetchMore:l,hasNext:n,users:i}},y=()=>{const s=f(j);return e.jsxs(S,{p:"md",radius:"lg",shadow:"sm",withBorder:!0,className:b.root,children:[e.jsx(m,{animate:!0,circle:!0,height:84}),e.jsxs(d,{gap:"lg",mt:8,children:[e.jsx(m,{radius:8,height:10,w:100}),e.jsx(m,{radius:8,height:10,w:100})]}),e.jsx(m,{mt:"auto",ml:s?"auto":0,radius:8,height:10,w:160})]})},z=16,q=5,A=3,C=()=>{const[s]=g(),t=s.get("q"),a=f(j),{users:r,loading:n,fetchMore:c,hasNext:i}=v({variables:{query:t??"",limit:z},skip:!t}),{t:l}=p(),[o]=U({onChange:u=>i&&u&&c()});return t&&!n&&!(r!=null&&r.length)?e.jsx(L,{order:3,ta:"center",children:l("translation:user:noFound")}):e.jsxs(d,{mih:400,pos:"relative",children:[n&&e.jsx(M,{}),e.jsx(d,{component:"ul",pl:0,children:r==null?void 0:r.map(u=>e.jsx(_,{user:u},u.login))}),e.jsx(d,{ref:o,children:i&&[...new Array(a?q:A)].map(u=>e.jsx(y,{}))})]})},B=()=>{const[s,t]=g(),{t:a}=p(),r=n=>{t(c=>({...c,q:n}))};return e.jsxs(d,{mt:80,gap:56,children:[e.jsx(N,{onSearch:r,searchValue:s.get("q")??"",placeholder:a("translation:user:searchPlaceholder")}),e.jsx(C,{})]})};export{B as default};
