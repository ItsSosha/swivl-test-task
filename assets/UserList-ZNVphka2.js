import{r as I,j as s,f as A,u as j,a as L,B as C,c as T,g as R,b as B,p as Se,e as be,d as ie,h as xe,L as Ie,S as N,T as se,i as _e,k as de,l as je}from"./index-DHt0IGJs.js";import{u as we,M as Ne,P as ue,F as pe,A as ze,S as Q,a as $e}from"./useIntersectionObserver-Bi2Wba6E.js";const Ee=(t,e)=>{const r=I.useRef(t),i=I.useRef(null);I.useEffect(()=>{r.current=t},[t]);const n=I.useCallback(()=>{i.current&&clearTimeout(i.current)},[]);return[I.useMemo(()=>{const l=(...o)=>{r.current(...o)};return(...o)=>{n(),i.current=setTimeout(()=>l(...o),e)}},[n]),n]};function Pe(t=null){const e=I.createContext(t);return[({children:n,value:a})=>s.jsx(e.Provider,{value:a,children:n}),()=>I.useContext(e)]}const[Re,H]=Pe({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var b={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const ae={},Ce=T((t,{size:e})=>({description:{"--input-description-size":e===void 0?void 0:`calc(${R(e)} - ${B(2)})`}})),J=A((t,e)=>{const r=j("InputDescription",ae,t),{classNames:i,className:n,style:a,styles:l,unstyled:o,vars:p,size:y,__staticSelector:S,__inheritStyles:g=!0,variant:x,...h}=j("InputDescription",ae,r),d=H(),u=L({name:["InputWrapper",S],props:r,classes:b,className:n,style:a,classNames:i,styles:l,unstyled:o,rootSelector:"description",vars:p,varsResolver:Ce}),m=g&&(d==null?void 0:d.getStyles)||u;return s.jsx(C,{component:"p",ref:e,variant:x,size:y,...m("description",d!=null&&d.getStyles?{className:n,style:a}:void 0),...h})});J.classes=b;J.displayName="@mantine/core/InputDescription";const We={},Be=T((t,{size:e})=>({error:{"--input-error-size":e===void 0?void 0:`calc(${R(e)} - ${B(2)})`}})),K=A((t,e)=>{const r=j("InputError",We,t),{classNames:i,className:n,style:a,styles:l,unstyled:o,vars:p,size:y,__staticSelector:S,__inheritStyles:g=!0,variant:x,...h}=r,d=L({name:["InputWrapper",S],props:r,classes:b,className:n,style:a,classNames:i,styles:l,unstyled:o,rootSelector:"error",vars:p,varsResolver:Be}),u=H(),m=g&&(u==null?void 0:u.getStyles)||d;return s.jsx(C,{component:"p",ref:e,variant:x,size:y,...m("error",u!=null&&u.getStyles?{className:n,style:a}:void 0),...h})});K.classes=b;K.displayName="@mantine/core/InputError";const le={labelElement:"label"},Le=T((t,{size:e})=>({label:{"--input-label-size":R(e),"--input-asterisk-color":void 0}})),X=A((t,e)=>{const r=j("InputLabel",le,t),{classNames:i,className:n,style:a,styles:l,unstyled:o,vars:p,labelElement:y,size:S,required:g,htmlFor:x,onMouseDown:h,children:d,__staticSelector:u,variant:m,mod:$,...f}=j("InputLabel",le,r),c=L({name:["InputWrapper",u],props:r,classes:b,className:n,style:a,classNames:i,styles:l,unstyled:o,rootSelector:"label",vars:p,varsResolver:Le}),_=H(),k=(_==null?void 0:_.getStyles)||c;return s.jsxs(C,{...k("label",_!=null&&_.getStyles?{className:n,style:a}:void 0),component:y,variant:m,size:S,ref:e,htmlFor:y==="label"?x:void 0,mod:[{required:g},$],onMouseDown:w=>{h==null||h(w),!w.defaultPrevented&&w.detail>1&&w.preventDefault()},...f,children:[d,g&&s.jsx("span",{...k("required"),"aria-hidden":!0,children:" *"})]})});X.classes=b;X.displayName="@mantine/core/InputLabel";const ce={},re=A((t,e)=>{const r=j("InputPlaceholder",ce,t),{classNames:i,className:n,style:a,styles:l,unstyled:o,vars:p,__staticSelector:y,variant:S,error:g,mod:x,...h}=j("InputPlaceholder",ce,r),d=L({name:["InputPlaceholder",y],props:r,classes:b,className:n,style:a,classNames:i,styles:l,unstyled:o,rootSelector:"placeholder"});return s.jsx(C,{...d("placeholder"),mod:[{error:!!g},x],component:"span",variant:S,ref:e,...h})});re.classes=b;re.displayName="@mantine/core/InputPlaceholder";function ke(t,{hasDescription:e,hasError:r}){const i=t.findIndex(p=>p==="input"),n=t.slice(0,i),a=t.slice(i+1),l=e&&n.includes("description")||r&&n.includes("error");return{offsetBottom:e&&a.includes("description")||r&&a.includes("error"),offsetTop:l}}const qe={labelElement:"label",inputContainer:t=>t,inputWrapperOrder:["label","description","input","error"]},Ae=T((t,{size:e})=>({label:{"--input-label-size":R(e),"--input-asterisk-color":void 0},error:{"--input-error-size":e===void 0?void 0:`calc(${R(e)} - ${B(2)})`},description:{"--input-description-size":e===void 0?void 0:`calc(${R(e)} - ${B(2)})`}})),ne=A((t,e)=>{const r=j("InputWrapper",qe,t),{classNames:i,className:n,style:a,styles:l,unstyled:o,vars:p,size:y,variant:S,__staticSelector:g,inputContainer:x,inputWrapperOrder:h,label:d,error:u,description:m,labelProps:$,descriptionProps:f,errorProps:c,labelElement:_,children:k,withAsterisk:w,id:D,required:Y,__stylesApiProps:Z,mod:ee,...oe}=r,F=L({name:["InputWrapper",g],props:Z||r,classes:b,className:n,style:a,classNames:i,styles:l,unstyled:o,vars:p,varsResolver:Ae}),E={size:y,variant:S,__staticSelector:g},P=we(D),te=typeof w=="boolean"?w:Y,O=(c==null?void 0:c.id)||`${P}-error`,U=(f==null?void 0:f.id)||`${P}-description`,M=P,q=!!u&&typeof u!="boolean",v=!!m,G=`${q?O:""} ${v?U:""}`,W=G.trim().length>0?G.trim():void 0,V=($==null?void 0:$.id)||`${P}-label`,he=d&&s.jsx(X,{labelElement:_,id:V,htmlFor:M,required:te,...E,...$,children:d},"label"),me=v&&s.jsx(J,{...f,...E,size:(f==null?void 0:f.size)||E.size,id:(f==null?void 0:f.id)||U,children:m},"description"),fe=s.jsx(I.Fragment,{children:x(k)},"input"),ve=q&&I.createElement(K,{...c,...E,size:(c==null?void 0:c.size)||E.size,key:"error",id:(c==null?void 0:c.id)||O},u),ye=h.map(ge=>{switch(ge){case"label":return he;case"input":return fe;case"description":return me;case"error":return ve;default:return null}});return s.jsx(Re,{value:{getStyles:F,describedBy:W,inputId:M,labelId:V,...ke(h,{hasDescription:v,hasError:q})},children:s.jsx(C,{ref:e,variant:S,size:y,mod:[{error:!!u},ee],...F("root"),...oe,children:ye})})});ne.classes=b;ne.displayName="@mantine/core/InputWrapper";const Te={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},De=T((t,e,r)=>({wrapper:{"--input-margin-top":r.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":r.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":ie(e.size,"input-height"),"--input-fz":R(e.size),"--input-radius":e.radius===void 0?void 0:xe(e.radius),"--input-left-section-width":e.leftSectionWidth!==void 0?B(e.leftSectionWidth):void 0,"--input-right-section-width":e.rightSectionWidth!==void 0?B(e.rightSectionWidth):void 0,"--input-padding-y":e.multiline?ie(e.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":e.leftSectionPointerEvents,"--input-right-section-pointer-events":e.rightSectionPointerEvents}})),z=Se((t,e)=>{const r=j("Input",Te,t),{classNames:i,className:n,style:a,styles:l,unstyled:o,required:p,__staticSelector:y,__stylesApiProps:S,size:g,wrapperProps:x,error:h,disabled:d,leftSection:u,leftSectionProps:m,leftSectionWidth:$,rightSection:f,rightSectionProps:c,rightSectionWidth:_,rightSectionPointerEvents:k,leftSectionPointerEvents:w,variant:D,vars:Y,pointer:Z,multiline:ee,radius:oe,id:F,withAria:E,withErrorStyles:P,mod:te,inputSize:O,...U}=r,{styleProps:M,rest:q}=be(U),v=H(),G={offsetBottom:v==null?void 0:v.offsetBottom,offsetTop:v==null?void 0:v.offsetTop},W=L({name:["Input",y],props:S||r,classes:b,className:n,style:a,classNames:i,styles:l,unstyled:o,stylesCtx:G,rootSelector:"wrapper",vars:Y,varsResolver:De}),V=E?{required:p,disabled:d,"aria-invalid":!!h,"aria-describedby":v==null?void 0:v.describedBy,id:(v==null?void 0:v.inputId)||F}:{};return s.jsxs(C,{...W("wrapper"),...M,...x,mod:[{error:!!h&&P,pointer:Z,disabled:d,multiline:ee,"data-with-right-section":!!f,"data-with-left-section":!!u},te],variant:D,size:g,children:[u&&s.jsx("div",{...m,"data-position":"left",...W("section",{className:m==null?void 0:m.className,style:m==null?void 0:m.style}),children:u}),s.jsx(C,{component:"input",...q,...V,ref:e,required:p,mod:{disabled:d,error:!!h&&P},variant:D,__size:O,...W("input")}),f&&s.jsx("div",{...c,"data-position":"right",...W("section",{className:c==null?void 0:c.className,style:c==null?void 0:c.style}),children:f})]})});z.classes=b;z.Wrapper=ne;z.Label=X;z.Error=K;z.Description=J;z.Placeholder=re;z.displayName="@mantine/core/Input";const Fe=({onSearch:t,searchValue:e})=>{const[r,i]=Ee(t,700),[n,a]=I.useState(e??""),l=o=>{o?r(o):i(),a(o)};return I.useEffect(()=>{a(n)},[e]),s.jsx(z,{size:"xl",placeholder:"Type somethings to search...",leftSection:s.jsx(Ne,{size:30}),value:n,onChange:o=>l(o.target.value),radius:"lg"})},Oe="_root_k8o9c_1",Ue={root:Oe},Me=({user:t})=>s.jsx(ue,{p:"md",radius:"lg",shadow:"sm",withBorder:!0,className:Ue.root,children:s.jsxs(pe,{h:"100%",w:"100%",direction:"row",columnGap:"md",c:"inherit",td:"none",align:"stretch",component:Ie,to:`/users/${t.login}`,children:[s.jsx(ze,{src:t.avatarUrl,size:"xl"}),s.jsxs(N,{gap:8,children:[s.jsx(se,{fw:"bold",fz:"lg",children:t.login}),s.jsx(se,{mb:12,fz:"md",children:t.name})]}),!!t.id&&s.jsx(N,{ml:"auto",justify:"flex-end",children:s.jsxs(se,{fw:"bold",children:["ID: ",t.id]})})]})}),Ge=(...t)=>{var l,o;const{data:e,...r}=_e(...t),i=e==null?void 0:e.search.pageInfo.hasNextPage,n=(o=(l=e==null?void 0:e.search)==null?void 0:l.pageInfo)==null?void 0:o.endCursor,a=e==null?void 0:e.search.nodes;return{...r,hasNext:i,users:a,endCursor:n}},Ve=()=>s.jsx(ue,{p:"md",radius:"lg",withBorder:!0,children:s.jsxs(pe,{h:"100%",w:"100%",direction:"row",columnGap:"md",c:"inherit",td:"none",align:"stretch",children:[s.jsx(Q,{animate:!0,circle:!0,height:84}),s.jsxs(N,{gap:"lg",mt:8,children:[s.jsx(Q,{radius:8,height:10,w:100}),s.jsx(Q,{radius:8,height:10,w:100})]}),s.jsx(N,{ml:"auto",justify:"flex-end",children:s.jsx(Q,{radius:8,height:10,w:160})})]})}),Qe=16,He=()=>{const[t]=de(),{users:e,loading:r,fetchMore:i,hasNext:n,endCursor:a}=Ge({variables:{query:t.get("q")??"",limit:Qe},skip:!t.get("q")}),[l]=$e({onChange:o=>n&&o&&i({variables:{after:a}})});return s.jsxs(N,{mih:400,pos:"relative",children:[r&&s.jsx(je,{}),s.jsx(N,{component:"ul",pl:0,children:e==null?void 0:e.map(o=>{const p=o;return s.jsx(Me,{user:p},p.login)})}),s.jsx(N,{ref:l,children:n&&[...new Array(5)].map(o=>s.jsx(Ve,{}))})]})},Xe=()=>{const[t,e]=de(),r=i=>{e(n=>({...n,q:i}))};return s.jsxs(N,{mt:80,gap:56,children:[s.jsx(Fe,{onSearch:r,searchValue:t.get("q")??""}),s.jsx(He,{})]})};export{Xe as default};
