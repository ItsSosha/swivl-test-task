import{r as h,j as e,I as E,L as I,S as d,T as x,u as L,a as f,M as j,b as m,c as g,d as p,e as M,f as P}from"./index-GF76sHzu.js";import{M as T,P as S,A as U,u as k}from"./useIntersectionObserver-CHkuOtgi.js";const N=(s,t)=>{const a=h.useRef(s),r=h.useRef(null);h.useEffect(()=>{a.current=s},[s]);const n=h.useCallback(()=>{r.current&&clearTimeout(r.current)},[]);return[h.useMemo(()=>{const i=(...l)=>{a.current(...l)};return(...l)=>{n(),r.current=setTimeout(()=>i(...l),t)}},[n]),n]},R=({onSearch:s,searchValue:t,placeholder:a})=>{const[r,n]=N(s,700),[c,i]=h.useState(t??""),l=o=>{o?r(o):n(),i(o)};return h.useEffect(()=>{i(c)},[t]),e.jsx(E,{size:"xl",placeholder:a,leftSection:e.jsx(T,{size:30}),value:c,onChange:o=>l(o.target.value),radius:"lg"})},_="_root_w83zw_1",b={root:_},v=({user:s})=>e.jsxs(S,{p:"md",radius:"lg",shadow:"sm",withBorder:!0,className:b.root,component:I,to:`/users/${s.login}`,c:"inherit",td:"none",children:[e.jsx(U,{src:s.avatarUrl,size:"xl"}),e.jsxs(d,{gap:8,children:[e.jsx(x,{fw:"bold",fz:"lg",children:s.login}),e.jsx(x,{mb:12,fz:"md",children:s.name})]}),!!s.id&&e.jsxs(x,{miw:0,mt:"auto",fw:"bold",truncate:!0,ta:"end",children:["ID: ",s.id]})]}),y=(...s)=>{var o,u;const{data:t,fetchMore:a,...r}=L(...s),n=t==null?void 0:t.search.pageInfo.hasNextPage,c=(u=(o=t==null?void 0:t.search)==null?void 0:o.pageInfo)==null?void 0:u.endCursor,i=t==null?void 0:t.search.nodes,l=h.useCallback(()=>a({variables:{after:c}}),[a,c]);return{...r,fetchMore:l,hasNext:n,users:i}},z=()=>{const s=f(j);return e.jsxs(S,{p:"md",radius:"lg",shadow:"sm",withBorder:!0,className:b.root,children:[e.jsx(m,{animate:!0,circle:!0,height:84}),e.jsxs(d,{gap:"lg",mt:8,children:[e.jsx(m,{radius:8,height:10,w:100}),e.jsx(m,{radius:8,height:10,w:100})]}),e.jsx(m,{mt:"auto",ml:s?"auto":0,radius:8,height:10,w:160})]})},q=16,A=5,C=3,O=()=>{const[s]=g(),t=s.get("q"),a=f(j),{users:r,loading:n,fetchMore:c,hasNext:i}=y({variables:{query:t??"",limit:q},skip:!t}),{t:l}=p(),[o]=k({onChange:u=>i&&u&&c()});return t&&!n&&!(r!=null&&r.length)?e.jsx(M,{order:3,ta:"center",children:l("translation:user:noFound")}):e.jsxs(d,{mih:400,pos:"relative",children:[n&&e.jsx(P,{}),e.jsx(d,{component:"ul",pl:0,children:r==null?void 0:r.map(u=>e.jsx(v,{user:u},`user-${u.login}`))}),e.jsx(d,{ref:o,children:i&&[...new Array(a?A:C)].map((u,w)=>e.jsx(z,{},w))})]})},F=()=>{const[s,t]=g(),{t:a}=p(),r=n=>{t(c=>({...c,q:n}))};return e.jsxs(d,{mt:80,gap:56,children:[e.jsx(R,{onSearch:r,searchValue:s.get("q")??"",placeholder:a("translation:user:searchPlaceholder")}),e.jsx(O,{})]})};export{F as default};
